(this["webpackJsonprancid-tomatillos"]=this["webpackJsonprancid-tomatillos"]||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(16),s=n.n(c),o=n(5),r=(n(24),n(19)),h=n(6),l=n(7),u=n(8),v=n(10),d=n(9),j=(n(25),n(26),n.p+"static/media/header-icon.a4a375ac.svg"),p=n(0),m=function(e){Object(v.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={value:""},a.handleChange=a.handleChange.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"handleChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("header",{children:[Object(p.jsx)("img",{src:j}),Object(p.jsx)("h1",{children:"Rancid Tomatillos"}),Object(p.jsx)("div",{children:Object(p.jsxs)("label",{for:"search-input",children:["Search:",Object(p.jsx)("input",{placeholder:"Search Titles...",type:"text",id:"search-input",value:this.state.value,onChange:function(t){e.handleChange(t),e.props.search(t.target.value)}})]})})]})}}]),n}(i.a.Component),b=(n(28),function(e){Object(v.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={hover:!1},a}return Object(l.a)(n,[{key:"changeHoverState",value:function(){this.setState({hover:!this.state.hover})}},{key:"componentDidMount",value:function(){for(var e=Math.floor(this.props.movie.average_rating),t="",n=0;n<e;n++)t="".concat(t," \u272a");this.setState({rating:t})}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(o.c,{style:{textDecoration:"none",color:"black"},to:"/".concat(this.props.movie.id),className:"movie-card",id:this.props.movie.id,onMouseEnter:function(){e.changeHoverState()},onMouseLeave:function(){e.changeHoverState()},children:[this.state.hover&&Object(p.jsxs)("div",{className:"hover-info",children:[Object(p.jsx)("p",{children:"Average Rating:"}),Object(p.jsx)("p",{children:this.state.rating})]}),Object(p.jsx)("img",{className:"movie-img",src:this.props.movie.poster_path,alt:"".concat(this.props.movie.title," movie cover")}),Object(p.jsx)("h2",{children:this.props.movie.title})]})}}]),n}(i.a.Component)),f=n(2);n(37),n(38);var O=function(e){var t=e.onClick,n=e.text,a=e.className;return Object(p.jsx)("button",{className:a,onClick:t,children:n})};n(39),n.p;var x=function(e){var t=e.currentMovie,n=(e.moviePath,e.movieKeyData),a={backgroundImage:"url(".concat(t.backdrop_path,")")};return Object(p.jsxs)("div",{className:"popup",children:[Object(p.jsx)("div",{className:"popup-opacity"}),Object(p.jsx)("div",{className:"popup-container",style:a,children:Object(p.jsxs)("div",{className:"popup-info",children:[Object(p.jsx)("div",{className:"popup-image",children:Object(p.jsx)("img",{className:"popup-poster",src:t.poster_path,alt:"imagery of ".concat(t.genres[0].toLowerCase())})}),Object(p.jsxs)("article",{className:"popup-article",children:[Object(p.jsx)(o.b,{to:"/",className:"popup-close",children:Object(p.jsx)(O,{text:"",className:"popup-btn"})}),Object(p.jsx)("h1",{children:t.title}),Object(p.jsxs)("p",{children:[" ","".concat(t.release_date.substring(0,4),", ").concat(Math.floor(t.runtime/60),"h ").concat(t.runtime%60,"m")," "]}),Object(p.jsxs)("div",{className:"popup-details",children:[Object(p.jsx)("h3",{children:"Overview:"}),Object(p.jsx)("p",{children:t.overview}),Object(p.jsx)("h3",{children:"Genres:"}),Object(p.jsx)("p",{children:t.genres.join("/")}),Object(p.jsx)("h3",{children:"Revenue:"}),Object(p.jsx)("p",{children:"".concat((t.revenue/1e6).toFixed(1)," Mil")}),Object(p.jsx)("h3",{children:"Trailer:"}),Object(p.jsx)("a",{target:"_blank",href:"https://www.youtube.com/watch?v=".concat(n.movieKey.key),children:"YouTube"})]})]})]})})]})};var g=function(e){var t=e.movies,n=e.allMovies,a=e.videoKeys,i=t.map((function(e){return Object(p.jsx)(b,{movie:e},e.id)}));return Object(p.jsxs)("main",{className:window.location.href.length>22?"movies-container-noscroll":"movies-container",children:[Object(p.jsx)(f.a,{exact:!0,path:"/:id",render:function(e){var t=e.match,i=n.find((function(e){return Number(t.params.id)===e.id}))||{id:0,poster_path:"",genres:[""],rating:"",runtime:0,revenue:0,overview:"",backdrop_path:"",release_date:"",title:""},c=a.find((function(e){return Number(t.params.id)===e.id}))||{};return a.find((function(e){return Number(t.params.id)===e.id}))&&Object(p.jsx)(x,{currentMovie:i,movieKeyData:c})}}),i]})},y=function(e){return fetch("https:rancid-tomatillos.herokuapp.com/api/v2/".concat(e)).then((function(e){return!!e.ok&&e.json()}))},M=function(e){Object(v.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).state={responseOk:!0,movies:[],allMovies:[],allMovieKeys:[],loading:!0,searchedMovies:[]},e.search=e.search.bind(Object(u.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;y("movies").then((function(t){t?e.setState({movies:t.movies}):e.setState({responseOk:!1})})).then((function(){e.state.movies.forEach((function(t){e.fetchMovie(t.id)}))})).then((function(){e.state.movies.forEach((function(t){e.fetchMovieVideo(t.id)}))})).then((function(){e.setState({loading:!1})}))}},{key:"fetchMovie",value:function(e){var t=this;return y("movies/".concat(e)).then((function(e){var n=t.state.allMovies;n.push(e.movie),t.setState({allMovies:n})}))}},{key:"fetchMovieVideo",value:function(e){var t=this;return y("/movies/".concat(e,"/videos")).then((function(n){var a=t.state.allMovieKeys;a.push({id:e,movieKey:n.videos[0]}),t.setState({allMovieKeys:a})}))}},{key:"search",value:function(e){var t=this,n=[],a=["the","a","i","and","in"];e.toLowerCase().split(" ").forEach((function(e){a.includes(e)||t.state.movies.forEach((function(t){t.title.toLowerCase().includes(e)&&n.push(t)}))})),n=Object(r.a)(new Set(n)),this.setState({searchedMovies:n})}},{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{className:"App",children:this.state.responseOk?Object(p.jsx)(f.a,{path:"/",render:function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(m,{search:e.search}),Object(p.jsx)(g,{movies:e.state.searchedMovies.length?e.state.searchedMovies:e.state.movies,allMovies:e.state.allMovies,videoKeys:e.state.allMovieKeys})]})}}):Object(p.jsx)("p",{children:"Try again, buster! No, seriously...we are sorry, having issues over here!"})})}}]),n}(i.a.Component),k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))};s.a.render(Object(p.jsx)(o.a,{children:Object(p.jsx)(M,{})}),document.getElementById("root")),k()}},[[40,1,2]]]);
//# sourceMappingURL=main.c2b97b54.chunk.js.map